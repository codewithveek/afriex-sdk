name: PR Check

on:
    pull_request:
        types: [opened, synchronize, reopened]

jobs:
    check:
        name: Check PR
        runs-on: ubuntu-latest

        steps:
            - name: Checkout
              uses: actions/checkout@v4
              with:
                  fetch-depth: 0

            - name: Setup pnpm
              uses: pnpm/action-setup@v2
              with:
                  version: 8

            - name: Setup Node.js
              uses: actions/setup-node@v4
              with:
                  node-version: "20"
                  cache: "pnpm"

            - name: Install dependencies
              run: pnpm install

            - name: Check for changesets
              run: |
                  if git diff --name-only origin/main...HEAD | grep -q "^\.changeset/"; then
                    echo "✅ Changeset found"
                  else
                    echo "⚠️ No changeset found. If this PR includes user-facing changes, please run 'pnpm changeset' to add one."
                  fi
